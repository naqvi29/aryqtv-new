{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useEffect } from 'react';\nimport { useRouter } from \"next/router\";\nimport Slider from \"react-slick\";\nimport Link from 'next/link';\nimport { Tab } from '@headlessui/react';\n\nconst search = props => {\n  // const { query } = useRouter();\n  // const {id, liveid} = useParams();\n  const router = useRouter();\n  const {\n    query\n  } = router.query; // const [videos, setVideos] = useState(null);\n\n  const {\n    0: isloading,\n    1: setisloading\n  } = useState(false);\n  const {\n    0: playlists,\n    1: setPlaylist\n  } = useState(null);\n  const {\n    0: page,\n    1: setPage\n  } = useState(1);\n  const {\n    0: prevPage,\n    1: setPrevPage\n  } = useState(0);\n  let url = 'https://api.dailymotion.com/user/' + process.env.channel + '/videos?fields=id,title,thumbnail_360_url,views_total,views_last_day,owner.screenname,duration&search=' + query + '&page=' + page + '&limit=8';\n  useEffect(() => {\n    // const count = 0;\n    if (playlists == null) {\n      // alert(props.id);\n      fetch(url).then(resp => {\n        resp.json().then(result => {\n          setPlaylist(result);\n          setPage(2);\n          setisloading(true);\n          console.log(result);\n        });\n      });\n    }\n  });\n\n  function next() {\n    setPage(page + 1); // alert(page);\n\n    fetch('https://api.dailymotion.com/user/' + process.env.channel + '/videos?fields=id,title,thumbnail_360_url,views_total,views_last_day,owner.screenname,duration&search=' + query + '&page=' + page + '&limit=8').then(resp => {\n      resp.json().then(results => {\n        console.log(results);\n        setPlaylist(results);\n        setPrevPage(page - 1);\n      });\n    });\n  }\n\n  function prev() {\n    setPrevPage(prevPage - 1); // alert(prevPage);\n\n    fetch('https://api.dailymotion.com/user/' + process.env.channel + '/videos?fields=id,title,thumbnail_360_url,views_total,views_last_day,owner.screenname,duration&search=' + query + '&page=' + prevPage + '&limit=8').then(resp => {\n      resp.json().then(results => {\n        console.log(results);\n        setPlaylist(results);\n        setPage(prevPage + 1);\n      });\n    });\n  }\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(\"section\", {\n      class: \"text-gray-600 body-font bg-black\",\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        class: \"container px-5 py-24 mx-auto\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"flex flex-wrap\",\n          children: playlists ? playlists.list.map((item, i) => /*#__PURE__*/_jsx(\"div\", {\n            className: \"w-full lg:w-3/12 sm:w-1/12 px-2 py-2\",\n            children: /*#__PURE__*/_jsx(Link, {\n              href: {\n                pathname: \"/video/\" + item.id\n              },\n              className: \"hover:scale-110\" // as={`video/${item.id}/${item.title}`}\n              ,\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: \"Extra\",\n                children: [/*#__PURE__*/_jsx(\"img\", {\n                  alt: \"...\",\n                  src: item.thumbnail_360_url,\n                  className: \"w-full align-middle rounded-t-lg cursor-pointer \"\n                }), /*#__PURE__*/_jsx(\"h4\", {\n                  className: \"text-xl font-bold text-white line-clamp-2\",\n                  children: item.title\n                })]\n              })\n            })\n          })) : null\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"text-center mt-5 mb-5\",\n          children: [prevPage > 0 ? /*#__PURE__*/_jsx(\"button\", {\n            onClick: () => prev(),\n            className: \"bg-yellow text-white active:bg-blueGray-600 text-xs font-bold uppercase px-4 py-2 rounded shadow hover:shadow-lg outline-none focus:outline-none lg:mr-1 lg:mb-0 ml-3 mb-3 ease-linear transition-all duration-150\",\n            type: \"button\",\n            children: \" Previous \"\n          }) : null, /*#__PURE__*/_jsx(\"span\", {\n            children: \"  \"\n          }), playlists && playlists.list.length > 7 ? /*#__PURE__*/_jsx(\"button\", {\n            onClick: () => next(),\n            className: \"bg-yellow text-white active:bg-blueGray-600 text-xs font-bold uppercase px-4 py-2 rounded shadow hover:shadow-lg outline-none focus:outline-none lg:mr-1 lg:mb-0 ml-3 mb-3 ease-linear transition-all duration-150\",\n            type: \"button\",\n            children: \" Next \"\n          }) : null]\n        })]\n      })\n    })\n  });\n}; // // This gets called on every request\n// export async function getServerSideProps(context) {\n//   // console.log(context.query);\n//   // Fetch data from external API\n//   const res = await fetch('https://zap.migary.com/api/schedule.php')\n//   const data = await res.json()\n// // console.log(data);\n//   // Pass data to the page via props\n//   return { props: { data } }\n// }\n\n\nexport default search;","map":null,"metadata":{},"sourceType":"module"}