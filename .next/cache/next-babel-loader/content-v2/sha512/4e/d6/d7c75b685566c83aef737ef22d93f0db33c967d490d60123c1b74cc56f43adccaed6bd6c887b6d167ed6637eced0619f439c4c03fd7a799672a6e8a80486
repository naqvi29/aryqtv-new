{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"G:\\\\VOD\\\\digital video\\\\pages\\\\search.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useRouter } from \"next/router\";\nimport PropTypes from \"prop-types\";\nimport Slider from \"react-slick\";\nimport Link from 'next/link';\nimport { Tab } from '@headlessui/react';\n\nvar search = function search(props) {\n  _s();\n\n  // const { query } = useRouter();\n  // const {id, liveid} = useParams();\n  var router = useRouter();\n  var query = router.query.query; // const [videos, setVideos] = useState(null);\n\n  var _useState = useState(false),\n      isloading = _useState[0],\n      setisloading = _useState[1];\n\n  var _useState2 = useState(null),\n      playlists = _useState2[0],\n      setPlaylist = _useState2[1];\n\n  var _useState3 = useState(1),\n      page = _useState3[0],\n      setPage = _useState3[1];\n\n  var _useState4 = useState(0),\n      prevPage = _useState4[0],\n      setPrevPage = _useState4[1];\n\n  var url = 'https://api.dailymotion.com/user/' + process.env.channel + '/videos?fields=id,title,thumbnail_360_url,views_total,views_last_day,owner.screenname,duration&search=' + query + '&page=' + page + '&limit=8';\n  useEffect(function () {\n    // const count = 0;\n    if (playlists == null) {\n      // alert(props.id);\n      fetch(url).then(function (resp) {\n        resp.json().then(function (result) {\n          setPlaylist(result);\n          setPage(2);\n          setisloading(true);\n          console.log(result);\n        });\n      });\n    }\n  });\n\n  function next() {\n    setPage(page + 1); // alert(page);\n\n    fetch('https://api.dailymotion.com/user/' + process.env.channel + '/videos?fields=id,title,thumbnail_360_url,views_total,views_last_day,owner.screenname,duration&search=' + query + '&page=' + page + '&limit=8').then(function (resp) {\n      resp.json().then(function (results) {\n        console.log(results);\n        setPlaylist(results);\n        setPrevPage(page - 1);\n      });\n    });\n  }\n\n  function prev() {\n    setPrevPage(prevPage - 1); // alert(prevPage);\n\n    fetch('https://api.dailymotion.com/user/' + process.env.channel + '/videos?fields=id,title,thumbnail_360_url,views_total,views_last_day,owner.screenname,duration&search=' + query + '&page=' + prevPage + '&limit=8').then(function (resp) {\n      resp.json().then(function (results) {\n        console.log(results);\n        setPlaylist(results);\n        setPage(prevPage + 1);\n      });\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      class: \"text-gray-600 body-font bg-black\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container px-5 py-24 mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-wrap\",\n          children: playlists ? playlists.list.map(function (item, i) {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full lg:w-3/12 sm:w-1/12 px-2 py-2\",\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                href: {\n                  pathname: \"/video/\" + item.id\n                },\n                className: \"hover:scale-110\" // as={`video/${item.id}/${item.title}`}\n                ,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"Extra\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    alt: \"...\",\n                    src: item.thumbnail_360_url,\n                    className: \"w-full align-middle rounded-t-lg cursor-pointer \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 120,\n                    columnNumber: 7\n                  }, _this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"text-xl font-bold text-white line-clamp-2\",\n                    children: item.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 126,\n                    columnNumber: 15\n                  }, _this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 7\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 3\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 3\n            }, _this);\n          }) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 3\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center mt-5 mb-5\",\n          children: [prevPage > 0 ? /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: function onClick() {\n              return prev();\n            },\n            className: \"bg-yellow text-white active:bg-blueGray-600 text-xs font-bold uppercase px-4 py-2 rounded shadow hover:shadow-lg outline-none focus:outline-none lg:mr-1 lg:mb-0 ml-3 mb-3 ease-linear transition-all duration-150\",\n            type: \"button\",\n            children: \" Previous \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 11\n          }, _this) : null, /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"  \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 6\n          }, _this), playlists && playlists.list.length > 7 ? /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: function onClick() {\n              return next();\n            },\n            className: \"bg-yellow text-white active:bg-blueGray-600 text-xs font-bold uppercase px-4 py-2 rounded shadow hover:shadow-lg outline-none focus:outline-none lg:mr-1 lg:mb-0 ml-3 mb-3 ease-linear transition-all duration-150\",\n            type: \"button\",\n            children: \" Next \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, _this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 5\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 3\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 1\n    }, _this)\n  }, void 0, false);\n}; // // This gets called on every request\n// export async function getServerSideProps(context) {\n//   // console.log(context.query);\n//   // Fetch data from external API\n//   const res = await fetch('https://zap.migary.com/api/schedule.php')\n//   const data = await res.json()\n// // console.log(data);\n//   // Pass data to the page via props\n//   return { props: { data } }\n// }\n\n\n_s(search, \"NH5/Ep2fsxvZbE5dMNbG+8uUuu8=\", false, function () {\n  return [useRouter];\n});\n\nexport default search;","map":{"version":3,"sources":["G:/VOD/digital video/pages/search.js"],"names":["React","useState","useEffect","useRouter","PropTypes","Slider","Link","Tab","search","props","router","query","isloading","setisloading","playlists","setPlaylist","page","setPage","prevPage","setPrevPage","url","process","env","channel","fetch","then","resp","json","result","console","log","next","results","prev","list","map","item","i","pathname","id","thumbnail_360_url","title","length"],"mappings":"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","sourcesContent":["import React, {useState, useEffect } from 'react';\r\nimport { useRouter } from \"next/router\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport Slider from \"react-slick\";\r\nimport Link from 'next/link';\r\nimport { Tab } from '@headlessui/react'\r\n\r\n\r\nconst search = (props) => {\r\n        \r\n    // const { query } = useRouter();\r\n    // const {id, liveid} = useParams();\r\n\r\n     const router = useRouter()\r\n    const {query} = router.query;\r\n    // const [videos, setVideos] = useState(null);\r\n    const [isloading, setisloading] = useState(false);\r\n\r\n    const [playlists, setPlaylist] = useState(null);\r\n      const [page, setPage] = useState(1);\r\n      const [prevPage, setPrevPage] = useState(0);\r\n\r\n      let\r\n          url = 'https://api.dailymotion.com/user/'+ process.env.channel +'/videos?fields=id,title,thumbnail_360_url,views_total,views_last_day,owner.screenname,duration&search='+query+'&page='+page+'&limit=8';\r\n      \r\n      useEffect(() => {\r\n        // const count = 0;\r\n        \r\n        if(playlists == null){ \r\n\t\t\t// alert(props.id);\r\n            \r\n         fetch(url).then((resp) => {\r\n\r\n        resp.json().then((result) => {\r\n            setPlaylist(result);\r\n            setPage(2);\r\n\r\n\t\tsetisloading(true);\r\n\t\tconsole.log(result)\r\n          \r\n     \r\n  })\r\n\r\n\r\n  }) }\r\n\r\n})\r\n\r\n\r\n\r\nfunction next(){\r\n\t\r\n  setPage(page + 1);\r\n\t// alert(page);\r\nfetch('https://api.dailymotion.com/user/'+ process.env.channel +'/videos?fields=id,title,thumbnail_360_url,views_total,views_last_day,owner.screenname,duration&search='+query+'&page='+page+'&limit=8').then((resp) => {\r\n\r\n\tresp.json().then((results) => {\r\n\t\tconsole.log(results)\r\n\t\tsetPlaylist(results);\r\n    setPrevPage(page - 1);\r\n\t\t\r\n\t})\r\n\r\n\r\n})\r\n\r\n\r\n\r\n\r\n}\r\n\r\nfunction prev(){\r\n\r\n  setPrevPage(prevPage - 1);\r\n\t// alert(prevPage);\r\n\r\nfetch('https://api.dailymotion.com/user/'+ process.env.channel +'/videos?fields=id,title,thumbnail_360_url,views_total,views_last_day,owner.screenname,duration&search='+query+'&page='+prevPage+'&limit=8').then((resp) => {\r\n\r\n\tresp.json().then((results) => {\r\n\t\tconsole.log(results)\r\n\t\tsetPlaylist(results);\r\n\t\tsetPage(prevPage +1);\r\n\t})\r\n\r\n\r\n})\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n\r\n    \r\n\r\n        {/* <h2 className=\"text-2xl mb-5 heading text-white font-semibold leading-normal\">\r\n              {title}\r\n          </h2> */}\r\n\r\n        \r\n<section class=\"text-gray-600 body-font bg-black\"> \r\n  <div class=\"container px-5 py-24 mx-auto\">\r\n  <div className=\"flex flex-wrap\">\r\n  {playlists ? playlists.list.map((item, i) => (\r\n  <div className=\"w-full lg:w-3/12 sm:w-1/12 px-2 py-2\">\r\n      \r\n        \r\n  <Link href={{\r\n       pathname: \"/video/\"+item.id,\r\n      }}\r\n      className=\"hover:scale-110\"\r\n      // as={`video/${item.id}/${item.title}`}\r\n      >\r\n      <div className=\"Extra\">\r\n      <img\r\n              alt=\"...\"\r\n              src={item.thumbnail_360_url}\r\n              className=\"w-full align-middle rounded-t-lg cursor-pointer \"\r\n            />\r\n            \r\n              <h4 className=\"text-xl font-bold text-white line-clamp-2\">\r\n                {item.title}\r\n              </h4>\r\n              {/* <p className=\"text-md font-light mt-2 text-white\">\r\n                Putting together a page has never been easier than matching\r\n                \r\n              </p> */}\r\n     \r\n      </div>\r\n      </Link>\r\n    \r\n  </div>\r\n\r\n    )): null }\r\n    </div>\r\n\r\n    \r\n   \r\n\r\n    <div className=\"text-center mt-5 mb-5\">\r\n\t\t\t\t\t{prevPage > 0 ?\r\n          <button onClick={() => prev()}\r\n          className=\"bg-yellow text-white active:bg-blueGray-600 text-xs font-bold uppercase px-4 py-2 rounded shadow hover:shadow-lg outline-none focus:outline-none lg:mr-1 lg:mb-0 ml-3 mb-3 ease-linear transition-all duration-150\"\r\n          type=\"button\"> Previous </button>\r\n\t\t\t\t\t: null } \r\n\t\t\t\t\t<span>  </span>\r\n\t\t\t\t\t{playlists && playlists.list.length > 7 ?\r\n\r\n            <button onClick={() => next()}\r\n            className=\"bg-yellow text-white active:bg-blueGray-600 text-xs font-bold uppercase px-4 py-2 rounded shadow hover:shadow-lg outline-none focus:outline-none lg:mr-1 lg:mb-0 ml-3 mb-3 ease-linear transition-all duration-150\"\r\n            type=\"button\"> Next </button>\r\n\r\n\t\t\t\t\r\n\t\t\t\t\t: null }\r\n\t\t\t\t\t</div>\r\n\r\n  </div>\r\n</section>\r\n\r\n\r\n\r\n     \r\n      \r\n\r\n     \r\n    </>\r\n  );\r\n}\r\n\r\n\r\n\r\n// // This gets called on every request\r\n// export async function getServerSideProps(context) {\r\n//   // console.log(context.query);\r\n//   // Fetch data from external API\r\n//   const res = await fetch('https://zap.migary.com/api/schedule.php')\r\n//   const data = await res.json()\r\n// // console.log(data);\r\n//   // Pass data to the page via props\r\n//   return { props: { data } }\r\n// }\r\n\r\n\r\n\r\n\r\nexport default search;\r\n\r\n"]},"metadata":{},"sourceType":"module"}